webpackJsonp([2],{"9V60":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={name:"ContainerMain",computed:{key:function(){return void 0!==this.$route.name?this.$route.name+ +new Date:this.$route+ +new Date}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"app-main"},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view",{key:this.key})],1)],1)},staticRenderFns:[]},o=n("VU/8")(r,i,!1,null,null,null);e.default=o.exports},AkUR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Z014"),i=n("hx2r"),o=n("9V60"),a={name:"layout",data:function(){return{showBar:!0}},created:function(){this.showBar=!location.hash.includes("out_visit=true")},components:{TopHeader:r.default,LeftNav:i.default,ContainerMain:o.default}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[t.showBar?n("el-header",{staticStyle:{position:"fixed",width:"100%",top:"0",left:"0","z-index":"100",background:"#00BF6C"}},[n("top-header")],1):t._e(),t._v(" "),n("el-container",{staticStyle:{background:"#fff",position:"flex","justify-content":"space-between"}},[t.showBar?n("el-aside",{staticStyle:{position:"fixed",top:"60px",left:"0","overflow-y":"auto",height:"100%",background:"rgb(68, 78, 79)"},attrs:{width:"200px"}},[n("left-nav")],1):t._e(),t._v(" "),n("el-main",{staticClass:"main-style",style:{marginLeft:t.showBar?"200px":"0",marginTop:t.showBar?"60px":"0"}},[n("container-main")],1)],1)],1)},staticRenderFns:[]};var u=n("VU/8")(a,c,!1,function(t){n("S9/T")},null,null);e.default=u.exports},HNM5:function(t,e,n){"use strict";var r=n("//Fk"),i=n.n(r),o=n("mtWM"),a=n.n(o),c=n("zL8q"),u=(n.n(c),a.a.create({timeout:5e3}));u.interceptors.response.use(function(t){var e=t.data;return 1==e.ret?e.data:(Object(c.Message)({message:(e.error||{}).msg||"暂未找到接口服务",type:"error",duration:5e3}),i.a.reject(e.error))},function(t){return console.warn("获取接口数据报错："+t),i.a.reject(t)}),e.a=u},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),i=n("zL8q"),o=n.n(i),a=(n("d4SV"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]});var c=n("VU/8")({name:"App",created:function(){},methods:{}},a,!1,function(t){n("SOFi")},null,null).exports,u=n("/ocq"),s=n("NYxO"),l=n("//Fk"),d=n.n(l),f=n("gyMJ"),p={state:{name:"",email:"",role_name:"",current_city_name:"",authUrls:[],own_cities:[]},mutations:{SET_NAME:function(t,e){t.name=e},SET_EMAIL:function(t,e){t.email=e},SET_ROLE_NAME:function(t,e){t.role_name=e},SET_CURRENT_CITY_NAME:function(t,e){t.current_city_name=e},SET_OWN_CITIES:function(t,e){t.own_cities=e},SET_AUTH_URLS:function(t,e){t.authUrls=e}},actions:{GetUserInfo:function(t){var e=t.commit;t.state;return new d.a(function(t,n){Object(f.a)().then(function(n){e("SET_EMAIL",n.email),e("SET_NAME",n.name),e("SET_ROLE_NAME",n.role_name),e("SET_CURRENT_CITY_NAME",n.current_city_name),e("SET_OWN_CITIES",n.own_cities),e("SET_AUTH_URLS",n.authUrls),t(n)}).catch(function(t){n(t)})})},LogOut:function(t){var e=t.commit;t.state;return new d.a(function(t,n){Object(f.c)().then(function(n){e("SET_EMAIL",""),e("SET_NAME",""),e("SET_ROLE_NAME",""),e("SET_CURRENT_CITY_NAME",""),e("SET_OWN_CITIES",[]),e("SET_AUTH_URLS",[]),t(n)}).catch(function(t){n(t)})})}}},m={name:function(t){return t.user.name||""},email:function(t){return t.user.email||""},role_name:function(t){return t.user.role_name||""},current_city_name:function(t){return t.user.current_city_name||""},own_cities:function(t){return t.user.own_cities||[]},authUrls:function(t){return t.user.authUrls||[]}};r.default.use(s.a);var h=new s.a.Store({modules:{user:p},getters:m}),_=n("AkUR");r.default.use(u.a);var v=function(t){return function(e){return n.e(0).then(function(){var r=[n("EtAD")("./"+t+".vue")];e.apply(null,r)}.bind(this)).catch(n.oe)}},y=new u.a({routes:[{path:"/",name:"Home",redirect:"/demo/table"},{path:"/demo",component:_.default,children:[{path:"table",name:"Table",component:v("demo/table")}]},{path:"/noAuthority",name:"NoAuthority",component:v("error/NoAuthority"),hidden:!0},{path:"/404",component:v("error/404"),hidden:!0},{path:"*",redirect:"/404",hidden:!0}]});r.default.config.productionTip=!1,r.default.use(o.a),h.dispatch("GetUserInfo").then(function(){new r.default({el:"#app",router:y,store:h,components:{App:c},template:"<App/>"})}).catch(function(){new r.default({el:"#app",router:y,store:h,components:{App:c},template:"<App/>"})})},"S9/T":function(t,e){},SOFi:function(t,e){},Z014:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Dd8w"),i=n.n(r),o=n("gyMJ"),a=n("NYxO"),c={name:"TopBar",computed:i()({},Object(a.b)(["name","role_name","current_city_name"])),created:function(){this.getCityList()},data:function(){return{projectName:"Vue-Element-mc",citySearchInput:"",cityList:[]}},methods:{getCityList:function(){var t=this;Object(o.b)().then(function(e){t.cityList=e||[]}).catch(function(t){console.warn("api listAuthCity:",t)})},switchCity:function(t){Object(o.d)(t).then(function(t){}).catch(function(t){}),this.$store.dispatch("GetUserInfo").then(function(){window.location.reload()}).catch(function(t){window.location.reload()})},handSearchCityRes:function(t){return(t.name||"").includes(this.citySearchInput)},logout:function(){this.$store.dispatch("LogOut").then(function(t){window.location.replace(t)}).catch(function(t){console.warn("api LogOut:",t)})}}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{staticStyle:{color:"#fff","margin-left":"10px"}},[t._v(t._s(t.projectName))]),t._v(" "),n("div",{staticStyle:{float:"right"}},[n("el-button",{staticStyle:{color:"#fff"},attrs:{type:"text"},on:{click:function(e){t.logout()}}},[t._v("退出")])],1),t._v(" "),n("div",{staticStyle:{float:"right","margin-right":"20px",cursor:"pointer"}},[n("el-dropdown",{attrs:{trigger:"click","hide-on-click":!1}},[n("span",{staticClass:"el-dropdown-link userinfo-inner",staticStyle:{color:"#fff"}},[t._v("\n              "+t._s(t.current_city_name)+"\n              "),n("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{staticStyle:{"max-height":"480px","overflow-y":"scroll","margin-top":"0"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[n("el-input",{attrs:{placeholder:""},model:{value:t.citySearchInput,callback:function(e){t.citySearchInput=e},expression:"citySearchInput"}})],1),t._v(" "),t._l(t.cityList,function(e,r){return t.handSearchCityRes(e)?n("el-dropdown-item",{key:r,nativeOn:{click:function(n){t.switchCity(e.id)}}},[t._v("\n                    "+t._s(e.name)+"\n                ")]):t._e()})],2)],1)],1),t._v(" "),n("div",{staticStyle:{color:"#fff",float:"right","font-size":"14px","margin-right":"20px"}},[n("span",[t._v("["+t._s(t.role_name)+"]")])]),t._v(" "),n("div",{staticStyle:{overflow:"hidden",float:"right","border-radius":"50%",background:"#F1FFFC",border:"1px solid #09D19F",width:"50px",height:"50px","margin-top":"5px","text-align":"center","line-height":"50px","margin-right":"20px"}},[n("span",{staticStyle:{color:"#00BF63"}},[t._v(t._s(t.name))])])])},staticRenderFns:[]},s=n("VU/8")(c,u,!1,null,null,null);e.default=s.exports},d4SV:function(t,e){},gyMJ:function(t,e,n){"use strict";e.a=function(){return Object(r.a)({url:"/public/getUserInfo",method:"post"})},e.c=function(){return Object(r.a)({url:"/public/logout",method:"get"})},e.b=function(){return Object(r.a)({url:"/public/listAuthCity",method:"post"})},e.d=function(t){return Object(r.a)({url:"/public/switchCity?cityId="+t,method:"get"})};var r=n("HNM5")},hx2r:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Dd8w"),i=n.n(r),o=n("NYxO"),a={name:"LeftNav",computed:i()({},Object(o.b)(["authUrls"]))},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%"}},[n("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{"min-height":"600px"},attrs:{"default-active":t.$route.path,"background-color":"#444E4F","text-color":"#fff","active-text-color":"#00BF6C"}},[n("router-link",{attrs:{to:"/demo/table"}},[n("el-submenu",{attrs:{index:"1"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-menu"}),t._v(" "),n("span",[t._v("Demo")])]),t._v(" "),n("el-menu-item-group",[n("el-menu-item",{attrs:{index:"/demo/table"}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("demo")])])],1)],2)],1),t._v(" "),t.authUrls.includes("/pomp/forecastrate")?n("router-link",{attrs:{to:"/pomp/forecastrate"}},[n("el-menu-item",{attrs:{index:"/pomp/forecastrate"}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("有权限才能看导航1")])])],1):t._e(),t._v(" "),t.authUrls.includes("/pomp/ratemanage")?n("router-link",{attrs:{to:"/pomp/ratemanage"}},[n("el-menu-item",{attrs:{index:"/pomp/ratemanage"}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("有权限才能看导航2")])])],1):t._e()],1)],1)},staticRenderFns:[]},u=n("VU/8")(a,c,!1,null,null,null);e.default=u.exports}},["NHnr"]);